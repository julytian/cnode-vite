import{i as n,j as e,k as t,g as o,m as i,P as a,l,I as s,L as r,n as c,q as u,s as f,t as d,x as p,r as y,y as v}from"./index.31b1b0ee.js";import{m,u as g}from"./mount-component.e0602605.js";var h=0;var C=l("toast"),b=C[0],k=C[1],O=b({props:{icon:String,show:Boolean,message:[Number,String],duration:Number,className:null,iconPrefix:String,lockScroll:Boolean,loadingType:String,forbidClick:Boolean,overlayClass:null,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,type:{type:String,default:"text"},position:{type:String,default:"middle"},transition:{type:String,default:"van-fade"}},emits:["update:show"],setup:function(l,f){var d,p=f.emit,y=!1,v=function(){var n=l.show&&l.forbidClick;y!==n&&((y=n)?(h||document.body.classList.add("van-toast--unclickable"),h++):h&&(--h||document.body.classList.remove("van-toast--unclickable")))},m=function(){l.closeOnClick&&p("update:show",!1)},g=function(){clearTimeout(d)},C=function(n){p("update:show",n)},b=function(){var n,e=l.type,t=l.message;if(c(t)&&""!==t)return"html"===e?o("div",{class:k("text"),innerHTML:t},null):o("div",{class:k("text")},"function"==typeof(n=t)||"[object Object]"===Object.prototype.toString.call(n)&&!u(n)?t:{default:function(){return[t]}})};return n([function(){return l.show},function(){return l.forbidClick}],v),n([function(){return l.show},function(){return l.duration}],(function(){g(),l.show&&l.duration>0&&(d=setTimeout((function(){p("update:show",!1)}),l.duration))})),e(v),t(v),function(){var n;return o(a,i({show:l.show,class:[k([l.position,(n={},n[l.type]=!l.icon,n)]),l.className],lockScroll:!1,transition:l.transition,overlayClass:l.overlayClass,overlayStyle:l.overlayStyle,closeOnClickOverlay:l.closeOnClickOverlay,onClick:m,onClosed:g},{"onUpdate:show":C}),{default:function(){return[(n=l.icon,e=l.type,t=l.iconPrefix,i=l.loadingType,n||"success"===e||"fail"===e?o(s,{name:n||e,class:k("icon"),classPrefix:t},null):"loading"===e?o(r,{class:k("loading"),type:i},null):void 0),b()];var n,e,t,i}})}}}),w={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:null,onOpened:null,duration:2e3,teleport:"body",iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:null,closeOnClick:!1,closeOnClickOverlay:!1},S={},x=[],j=!1,T=f({},w);function P(n){return d(n)?n:{message:n}}function B(){if(!p)return{};if(!x.length||j){var e=function(){var e=m({setup:function(){var e=y(),a=g(),l=a.open,s=a.state,r=a.close,c=a.toggle,u=function(){j&&(x=x.filter((function(n){return n!==t})),i())};return n(e,(function(n){s.message=n})),v().render=function(){return o(O,f({},s,{onClosed:u,"onUpdate:show":c}),null)},{open:l,clear:r,message:e}}}),t=e.instance,i=e.unmount;return t}();x.push(e)}return x[x.length-1]}function N(n){void 0===n&&(n={});var e=B();return n=P(n),n=f({},T,S[n.type||T.type],n),e.open(n),e}["loading","success","fail"].forEach((function(n){var e;N[n]=(e=n,function(n){return N(f({type:e},P(n)))})})),N.clear=function(n){x.length&&(n?(x.forEach((function(n){n.clear()})),x=[]):j?x.shift().clear():x[0].clear())},N.setDefaultOptions=function(n,e){"string"==typeof n?S[n]=e:f(T,n)},N.resetDefaultOptions=function(n){"string"==typeof n?S[n]=null:(T=f({},w),S={})},N.allowMultiple=function(n){void 0===n&&(n=!0),j=n},N.install=function(n){n.use(O),n.config.globalProperties.$toast=N};export{N as T};
