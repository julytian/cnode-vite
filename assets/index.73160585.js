import{d as a,_ as e,r as s,u as t,a as n,b as o,S as r,p as i,c,e as d,o as l,f as u,g as m,w as p,v,F as b,h as g}from"./index.f8c1ba6c.js";import{T as f}from"./index.403db992.js";import{a as h}from"./user.6b457762.js";import"./mount-component.703d2a00.js";var k=a({name:"LoginPage",components:{NavHeader:e},setup(){const a=s(""),e=t(),i=n(),c=o(),d=e.query.redirect;return{token:a,submit:async()=>{if(a.value)try{const e=await h(a.value),s={loginname:e.loginname,avatar_url:e.avatar_url,userId:e.id,token:a.value};window.sessionStorage.user=JSON.stringify(s),c.dispatch(`user/${r}`,s);const t=decodeURIComponent(d||"/");i.replace({path:t})}catch(e){}else f("令牌格式错误,应为36位UUID字符串")}}}});const w=g("data-v-6cdb0e3e");i("data-v-6cdb0e3e");const x={class:"login-info"};c();const y=w(((a,e,s,t,n,o)=>{const r=d("nav-header");return l(),u(b,null,[m(r,{"show-menu":!1,title:"登录"}),m("section",x,[p(m("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>a.token=e),class:"login-input",type:"text",placeholder:"Access Token",maxlength:"36"},null,512),[[v,a.token,void 0,{trim:!0}]]),m("div",{class:"login-btn",onClick:e[2]||(e[2]=(...e)=>a.submit&&a.submit(...e))},"登录")])],64)}));k.render=y,k.__scopeId="data-v-6cdb0e3e";export default k;
