import{d as e,O as t,b as a,a as s,Z as n,p as i,c as r,J as c,o as l,f as o,w as m,g as u,as as d,R as p,h as f,_ as v,u as g,r as y,j as _,i as b,e as k,Q as x,F as h,ab as j}from"./index.9908f708.js";import{T as w,a as T,E as C}from"./index.46ef2987.js";import{T as I}from"./index.e95e5ab2.js";import{b as L,c as N}from"./user.0bf6fdca.js";import"./index.280d0047.js";import"./useChildren.aacc0827.js";import"./use-route.6231ecff.js";import"./mount-component.ba59bc39.js";var S=e({name:"RecentItem",props:{item:{type:Object,default:{},required:!0}},methods:{getLastTimeStr:(e,a)=>t(e,a)},setup(){const e=a(),t=s();return{goDetail:a=>{t.push(`/topic/${a.id}`),e.dispatch(`topic/${n}`,{id:a.id,token:e.state.user.userInfo.token})},goUser:e=>{t.push(`/user/${e.author.loginname}`)}}}});const U=f("data-v-6c9dd7f6");i("data-v-6c9dd7f6");const R={class:"d-flex flex-column justify-content-between flex-1 recent-wrap"},$={class:"text-ellipsis recent-title"},z={class:"d-flex align-items-center justify-content-between"},D={class:"recent-loginname"},O={class:"recent-time"};r();const q=U(((e,t,a,s,n,i)=>{const r=c("lazy");return l(),o("section",{class:"d-flex recent",onClick:t[2]||(t[2]=t=>e.goDetail(e.item))},[m(u("img",{class:"recent-avatar",onClick:t[1]||(t[1]=d((t=>e.goUser(e.item)),["stop"]))},null,512),[[r,e.item.author.avatar_url]]),u("div",R,[u("div",$,p(e.item.title),1),u("div",z,[u("span",D,p(e.item.author.loginname),1),u("span",O,p(e.getLastTimeStr(e.item.last_reply_at,!0)),1)])])])}));S.render=q,S.__scopeId="data-v-6c9dd7f6";var E=e({name:"UserPage",components:{[w.name]:w,[T.name]:T,[C.name]:C,NavHeader:v,RecentItem:S},methods:{getLastTimeStr:(e,a)=>t(e,a)},setup(){const e=g(),t=s(),a=y({}),n=y({}),i=y("replies");_((()=>{c(),r()}));const r=async()=>{var a;const s=null==(a=e.params)?void 0:a.loginname;if(!s)return I("缺少用户名参数"),void t.replace("/");const i=await L(s);n.value=i},c=async()=>{var s;const n=null==(s=e.params)?void 0:s.loginname;if(!n)return I("缺少用户名参数"),void t.replace("/");const i=await N(n);a.value=i};return b((()=>e.params),(()=>{var t;(null==(t=e.params)?void 0:t.loginname)&&(c(),r())})),{activeName:i,user:a,collects:n}}});const F=f("data-v-2f5db6c2");i("data-v-2f5db6c2");const H={class:"d-flex flex-column align-items-center userinfo"},J={class:"userinfo-avatar"},P={class:"userinfo-name"},Q={class:"d-flex align-items-center justify-content-around w-100"},Z={key:1,class:"userinfo-score"};r();const A=F(((e,t,a,s,n,i)=>{const r=k("nav-header"),d=k("van-empty"),f=k("recent-item"),v=k("van-tab"),g=k("van-tabs"),y=c("lazy");return l(),o(h,null,[u(r,{title:"用户信息"}),u("section",H,[m(u("img",J,null,512),[[y,e.user.avatar_url]]),u("p",P,p(e.user.loginname),1),u("div",Q,[e.user.create_at?(l(),o("span",{key:0,textContent:p(e.getLastTimeStr(e.user.create_at,!1))},null,8,["textContent"])):x("v-if",!0),e.user.score?(l(),o("span",Z,"积分: "+p(e.user.score),1)):x("v-if",!0)])]),u(g,{active:e.activeName,"onUpdate:active":t[1]||(t[1]=t=>e.activeName=t),swipeable:"",sticky:""},{default:F((()=>[u(v,{title:"最近回复",name:"replies"},{default:F((()=>[e.user.recent_replies&&0===e.user.recent_replies.length?(l(),o(d,{key:0,description:"暂无数据"})):(l(!0),o(h,{key:1},j(e.user.recent_replies,(e=>(l(),o(f,{key:e.id,item:e},null,8,["item"])))),128))])),_:1}),u(v,{title:"最新发布",name:"topics"},{default:F((()=>[e.user.recent_topics&&0===e.user.recent_topics.length?(l(),o(d,{key:0,description:"暂无数据"})):(l(!0),o(h,{key:1},j(e.user.recent_topics,(e=>(l(),o(f,{key:e.id,item:e},null,8,["item"])))),128))])),_:1}),u(v,{title:"用户收藏",name:"collects"},{default:F((()=>[e.collects&&0===e.collects.length?(l(),o(d,{key:0,description:"暂无数据"})):(l(!0),o(h,{key:1},j(e.collects,(e=>(l(),o(f,{key:e.id,item:e},null,8,["item"])))),128))])),_:1})])),_:1},8,["active"])],64)}));E.render=A,E.__scopeId="data-v-2f5db6c2";export default E;
