import{d as e,O as t,b as a,a as s,X as n,p as r,c,J as i,o as l,f as o,w as m,g as u,ap as d,R as p,h as v,_ as f,u as g,r as y,j as _,i as x,e as h,Q as k,F as j,a8 as b}from"./index.f8c1ba6c.js";import{T as w,a as T,E as C}from"./index.6d043939.js";import{T as I}from"./index.403db992.js";import{b as L,c as N}from"./user.6b457762.js";import"./index.2eef357d.js";import"./useChildren.747839d4.js";import"./use-route.124dd958.js";import"./mount-component.703d2a00.js";var S=e({name:"RecentItem",props:{item:{type:Object,default:{},required:!0}},methods:{getLastTimeStr:(e,a)=>t(e,a)},setup(){const e=a(),t=s();return{goDetail:a=>{t.push(`/topic/${a.id}`),e.dispatch(`topic/${n}`,a.id)},goUser:e=>{t.push(`/user/${e.author.loginname}`)}}}});const U=v("data-v-22cd743c");r("data-v-22cd743c");const R={class:"d-flex flex-column justify-content-between flex-1 recent-wrap"},$={class:"text-ellipsis recent-title"},z={class:"d-flex align-items-center justify-content-between"},D={class:"recent-loginname"},O={class:"recent-time"};c();const q=U(((e,t,a,s,n,r)=>{const c=i("lazy");return l(),o("section",{class:"d-flex recent",onClick:t[2]||(t[2]=t=>e.goDetail(e.item))},[m(u("img",{class:"recent-avatar",onClick:t[1]||(t[1]=d((t=>e.goUser(e.item)),["stop"]))},null,512),[[c,e.item.author.avatar_url]]),u("div",R,[u("div",$,p(e.item.title),1),u("div",z,[u("span",D,p(e.item.author.loginname),1),u("span",O,p(e.getLastTimeStr(e.item.last_reply_at,!0)),1)])])])}));S.render=q,S.__scopeId="data-v-22cd743c";var E=e({name:"UserPage",components:{[w.name]:w,[T.name]:T,[C.name]:C,NavHeader:f,RecentItem:S},methods:{getLastTimeStr:(e,a)=>t(e,a)},setup(){const e=g(),t=s(),a=y({}),n=y({}),r=y("replies");_((()=>{i(),c()}));const c=async()=>{var a;const s=null==(a=e.params)?void 0:a.loginname;if(!s)return I("缺少用户名参数"),void t.replace("/");const r=await L(s);n.value=r},i=async()=>{var s;const n=null==(s=e.params)?void 0:s.loginname;if(!n)return I("缺少用户名参数"),void t.replace("/");const r=await N(n);a.value=r};return x((()=>e.params),(()=>{var t;(null==(t=e.params)?void 0:t.loginname)&&(i(),c())})),{activeName:r,user:a,collects:n}}});const F=v("data-v-fcafc46c");r("data-v-fcafc46c");const H={class:"d-flex flex-column align-items-center userinfo"},J={class:"userinfo-avatar"},P={class:"userinfo-name"},Q={class:"d-flex align-items-center justify-content-around w-100"},X={key:1,class:"userinfo-score"};c();const A=F(((e,t,a,s,n,r)=>{const c=h("nav-header"),d=h("van-empty"),v=h("recent-item"),f=h("van-tab"),g=h("van-tabs"),y=i("lazy");return l(),o(j,null,[u(c,{title:"用户信息"}),u("section",H,[m(u("img",J,null,512),[[y,e.user.avatar_url]]),u("p",P,p(e.user.loginname),1),u("div",Q,[e.user.create_at?(l(),o("span",{key:0,textContent:p(e.getLastTimeStr(e.user.create_at,!1))},null,8,["textContent"])):k("",!0),e.user.score?(l(),o("span",X,"积分: "+p(e.user.score),1)):k("",!0)])]),u(g,{active:e.activeName,"onUpdate:active":t[1]||(t[1]=t=>e.activeName=t),swipeable:"",sticky:""},{default:F((()=>[u(f,{title:"最近回复",name:"replies"},{default:F((()=>[e.user.recent_replies&&0===e.user.recent_replies.length?(l(),o(d,{key:0,description:"暂无数据"})):(l(!0),o(j,{key:1},b(e.user.recent_replies,(e=>(l(),o(v,{key:e.id,item:e},null,8,["item"])))),128))])),_:1}),u(f,{title:"最新发布",name:"topics"},{default:F((()=>[e.user.recent_topics&&0===e.user.recent_topics.length?(l(),o(d,{key:0,description:"暂无数据"})):(l(!0),o(j,{key:1},b(e.user.recent_topics,(e=>(l(),o(v,{key:e.id,item:e},null,8,["item"])))),128))])),_:1}),u(f,{title:"用户收藏",name:"collects"},{default:F((()=>[e.collects&&0===e.collects.length?(l(),o(d,{key:0,description:"暂无数据"})):(l(!0),o(j,{key:1},b(e.collects,(e=>(l(),o(v,{key:e.id,item:e},null,8,["item"])))),128))])),_:1})])),_:1},8,["active"])],64)}));E.render=A,E.__scopeId="data-v-fcafc46c";export default E;
