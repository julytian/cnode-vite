import{d as e,G as t,b as a,a as s,R as n,p as r,c as i,H as c,o as l,f as o,w as m,g as u,ap as d,K as p,h as v,_ as f,u as g,r as _,q as y,m as x,e as h,J as k,F as j,U as b}from"./index.f3a72f47.js";import{T as w,a as T,E as U}from"./index.d540f61a.js";import{T as C}from"./index.af47a00d.js";import{b as I}from"./user.45494391.js";import"./use-route.9334fcdc.js";var L=e({name:"RecentItem",props:{item:{type:Object,default:{},required:!0}},methods:{getLastTimeStr:(e,a)=>t(e,a)},setup(){const e=a(),t=s();return{goDetail:a=>{t.push(`/topic/${a.id}`),e.dispatch(`topic/${n}`,a.id)},goUser:e=>{t.push(`/user/${e.author.loginname}`)}}}});const N=v("data-v-22cd743c");r("data-v-22cd743c");const S={class:"d-flex flex-column justify-content-between flex-1 recent-wrap"},R={class:"text-ellipsis recent-title"},$={class:"d-flex align-items-center justify-content-between"},q={class:"recent-loginname"},z={class:"recent-time"};i();const D=N(((e,t,a,s,n,r)=>{const i=c("lazy");return l(),o("section",{class:"d-flex recent",onClick:t[2]||(t[2]=t=>e.goDetail(e.item))},[m(u("img",{class:"recent-avatar",onClick:t[1]||(t[1]=d((t=>e.goUser(e.item)),["stop"]))},null,512),[[i,e.item.author.avatar_url]]),u("div",S,[u("div",R,p(e.item.title),1),u("div",$,[u("span",q,p(e.item.author.loginname),1),u("span",z,p(e.getLastTimeStr(e.item.last_reply_at,!0)),1)])])])}));L.render=D,L.__scopeId="data-v-22cd743c";var H=e({name:"UserPage",components:{[w.name]:w,[T.name]:T,[U.name]:U,NavHeader:f,RecentItem:L},methods:{getLastTimeStr:(e,a)=>t(e,a)},setup(){const e=g(),t=s(),a=_({}),n=_("replies");y((()=>{r()}));const r=async()=>{var s;const n=null==(s=e.params)?void 0:s.loginname;if(!n)return C("缺少用户名参数"),void t.replace("/");const r=await I(n);a.value=r};return x((()=>e.params),(()=>{var t;(null==(t=e.params)?void 0:t.loginname)&&r()})),{activeName:n,user:a}}});const E=v("data-v-465e22a1");r("data-v-465e22a1");const F={class:"d-flex flex-column align-items-center userinfo"},G={class:"userinfo-avatar"},J={class:"userinfo-name"},K={class:"d-flex align-items-center justify-content-around w-100"},O={key:1,class:"userinfo-score"};i();const P=E(((e,t,a,s,n,r)=>{const i=h("nav-header"),d=h("van-empty"),v=h("recent-item"),f=h("van-tab"),g=h("van-tabs"),_=c("lazy");return l(),o(j,null,[u(i,{title:"用户信息"}),u("section",F,[m(u("img",G,null,512),[[_,e.user.avatar_url]]),u("p",J,p(e.user.loginname),1),u("div",K,[e.user.create_at?(l(),o("span",{key:0,textContent:p(e.getLastTimeStr(e.user.create_at,!1))},null,8,["textContent"])):k("",!0),e.user.score?(l(),o("span",O,"积分: "+p(e.user.score),1)):k("",!0)])]),u(g,{active:e.activeName,"onUpdate:active":t[1]||(t[1]=t=>e.activeName=t),swipeable:"",sticky:""},{default:E((()=>[u(f,{title:"最近回复",name:"replies"},{default:E((()=>[e.user.recent_replies&&0===e.user.recent_replies.length?(l(),o(d,{key:0,description:"暂无数据"})):(l(!0),o(j,{key:1},b(e.user.recent_replies,(e=>(l(),o(v,{key:e.id,item:e},null,8,["item"])))),128))])),_:1}),u(f,{title:"最新发布",name:"topics"},{default:E((()=>[e.user.recent_topics&&0===e.user.recent_topics.length?(l(),o(d,{key:0,description:"暂无数据"})):(l(!0),o(j,{key:1},b(e.user.recent_topics,(e=>(l(),o(v,{key:e.id,item:e},null,8,["item"])))),128))])),_:1})])),_:1},8,["active"])],64)}));H.render=P,H.__scopeId="data-v-465e22a1";export default H;
