import{i as n,j as t,k as o,n as e,l as i,m as a,q as l,s,g as r,t as c,P as u,x as f,I as d,L as p,y,z as v,A as g,B as m,r as h,C}from"./index.f3a72f47.js";var b=0;var k=f("toast"),O=k[0],w=k[1],S=O({props:{icon:String,show:Boolean,message:[Number,String],duration:Number,className:null,iconPrefix:String,lockScroll:Boolean,loadingType:String,forbidClick:Boolean,overlayClass:null,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,type:{type:String,default:"text"},position:{type:String,default:"middle"},transition:{type:String,default:"van-fade"}},emits:["update:show"],setup:function(n,t){var o,e=t.emit,i=!1,f=function(){var t=n.show&&n.forbidClick;i!==t&&((i=t)?(b||document.body.classList.add("van-toast--unclickable"),b++):b&&(--b||document.body.classList.remove("van-toast--unclickable")))},g=function(){n.closeOnClick&&e("update:show",!1)},m=function(){clearTimeout(o)},h=function(n){e("update:show",n)},C=function(){var t,o=n.type,e=n.message;if(y(e)&&""!==e)return"html"===o?r("div",{class:w("text"),innerHTML:e},null):r("div",{class:w("text")},"function"==typeof(t=e)||"[object Object]"===Object.prototype.toString.call(t)&&!v(t)?e:{default:function(){return[e]}})};return a([function(){return n.show},function(){return n.forbidClick}],f),a([function(){return n.show},function(){return n.duration}],(function(){m(),n.show&&n.duration>0&&(o=setTimeout((function(){e("update:show",!1)}),n.duration))})),l(f),s(f),function(){var t;return r(u,c({show:n.show,class:[w([n.position,(t={},t[n.type]=!n.icon,t)]),n.className],lockScroll:!1,transition:n.transition,overlayClass:n.overlayClass,overlayStyle:n.overlayStyle,closeOnClickOverlay:n.closeOnClickOverlay,onClick:g,onClosed:m},{"onUpdate:show":h}),{default:function(){return[(t=n.icon,o=n.type,e=n.iconPrefix,i=n.loadingType,t||"success"===o||"fail"===o?r(d,{name:t||o,class:w("icon"),classPrefix:e},null):"loading"===o?r(p,{class:w("loading"),type:i},null):void 0),C()];var t,o,e,i}})}}}),x={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:null,onOpened:null,duration:2e3,teleport:"body",iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:null,closeOnClick:!1,closeOnClickOverlay:!1},T={},j=[],B=!1,P=o({},x);function N(n){return g(n)?n:{message:n}}function L(){var l,s,c=(l=n({setup:function(){var n=h(),l=function(){var n=t({show:!1}),a=function(t){n.show=t},l=function(t){o(n,t),e((function(){a(!0)}))},s=function(){a(!1)};return i({open:l,close:s,toggle:a}),{open:l,close:s,state:n,toggle:a}}(),s=l.open,c=l.state,d=l.close,p=l.toggle,y=function(){B&&(j=j.filter((function(n){return n!==u})),f())};return a(n,(function(n){c.message=n})),C().render=function(){return r(S,o({},c,{onClosed:y,"onUpdate:show":p}),null)},{open:s,clear:d,message:n}}}),s=document.createElement("div"),document.body.appendChild(s),{instance:l.mount(s),unmount:function(){l.unmount(s),document.body.removeChild(s)}}),u=c.instance,f=c.unmount;return u}function E(n){void 0===n&&(n={});var t=function(){if(!m)return{};if(!j.length||B){var n=L();j.push(n)}return j[j.length-1]}();return n=N(n),n=o({},P,T[n.type||P.type],n),t.open(n),t}["loading","success","fail"].forEach((function(n){var t;E[n]=(t=n,function(n){return E(o({type:t},N(n)))})})),E.clear=function(n){j.length&&(n?(j.forEach((function(n){n.clear()})),j=[]):B?j.shift().clear():j[0].clear())},E.setDefaultOptions=function(n,t){"string"==typeof n?T[n]=t:o(P,n)},E.resetDefaultOptions=function(n){"string"==typeof n?T[n]=null:(P=o({},x),T={})},E.allowMultiple=function(n){void 0===n&&(n=!0),B=n},E.install=function(n){n.use(S),n.config.globalProperties.$toast=E};export{E as T};
