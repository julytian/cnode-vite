import{d as e,_ as a,r as s,u as t,a as n,b as o,S as r,p as i,c,e as l,o as d,f as u,g as m,w as p,v,F as g,h as b}from"./index.8b92154c.js";import{T as f}from"./index.c965e512.js";import{a as h}from"./user.88816a7a.js";import"./mount-component.b1cf4679.js";var k=e({name:"LoginPage",components:{NavHeader:a},setup(){const e=s(""),a=t(),i=n(),c=o(),l=a.query.redirect;return{token:e,submit:async()=>{if(e.value)try{const a=await h(e.value),s={loginname:a.loginname,avatar_url:a.avatar_url,userId:a.id,token:e.value};window.sessionStorage.user=JSON.stringify(s),c.dispatch(`user/${r}`,s);const t=decodeURIComponent(l||"/");i.replace({path:t})}catch(a){}else f("令牌格式错误,应为36位UUID字符串")}}}});const w=b("data-v-6cdb0e3e");i("data-v-6cdb0e3e");const x={class:"login-info"};c();const y=w(((e,a,s,t,n,o)=>{const r=l("nav-header");return d(),u(g,null,[m(r,{"show-menu":!1,title:"登录"}),m("section",x,[p(m("input",{"onUpdate:modelValue":a[1]||(a[1]=a=>e.token=a),class:"login-input",type:"text",placeholder:"Access Token",maxlength:"36"},null,512),[[v,e.token,void 0,{trim:!0}]]),m("div",{class:"login-btn",onClick:a[2]||(a[2]=(...a)=>e.submit&&e.submit(...a))},"登录")])],64)}));k.render=y,k.__scopeId="data-v-6cdb0e3e";export default k;
