import{d as e,O as t,b as a,a as s,Z as n,p as r,c as i,J as c,o as l,f as o,w as m,g as d,as as u,R as p,h as v,_ as f,u as g,r as y,j as _,i as b,e as x,Q as h,F as k,ab as j}from"./index.ae815293.js";import{T as w,a as T,E as C}from"./index.3af17bd5.js";import{T as I}from"./index.2e9f5cfd.js";import{b as L,c as N}from"./user.d698b8b1.js";import"./index.cbdf9dd2.js";import"./useChildren.9708e8e1.js";import"./use-route.834cb91a.js";import"./mount-component.10517cb8.js";var S=e({name:"RecentItem",props:{item:{type:Object,default:{},required:!0}},methods:{getLastTimeStr:(e,a)=>t(e,a)},setup(){const e=a(),t=s();return{goDetail:a=>{t.push(`/topic/${a.id}`),e.dispatch(`topic/${n}`,a.id)},goUser:e=>{t.push(`/user/${e.author.loginname}`)}}}});const U=v("data-v-22cd743c");r("data-v-22cd743c");const R={class:"d-flex flex-column justify-content-between flex-1 recent-wrap"},$={class:"text-ellipsis recent-title"},z={class:"d-flex align-items-center justify-content-between"},D={class:"recent-loginname"},O={class:"recent-time"};i();const q=U(((e,t,a,s,n,r)=>{const i=c("lazy");return l(),o("section",{class:"d-flex recent",onClick:t[2]||(t[2]=t=>e.goDetail(e.item))},[m(d("img",{class:"recent-avatar",onClick:t[1]||(t[1]=u((t=>e.goUser(e.item)),["stop"]))},null,512),[[i,e.item.author.avatar_url]]),d("div",R,[d("div",$,p(e.item.title),1),d("div",z,[d("span",D,p(e.item.author.loginname),1),d("span",O,p(e.getLastTimeStr(e.item.last_reply_at,!0)),1)])])])}));S.render=q,S.__scopeId="data-v-22cd743c";var E=e({name:"UserPage",components:{[w.name]:w,[T.name]:T,[C.name]:C,NavHeader:f,RecentItem:S},methods:{getLastTimeStr:(e,a)=>t(e,a)},setup(){const e=g(),t=s(),a=y({}),n=y({}),r=y("replies");_((()=>{c(),i()}));const i=async()=>{var a;const s=null==(a=e.params)?void 0:a.loginname;if(!s)return I("缺少用户名参数"),void t.replace("/");const r=await L(s);n.value=r},c=async()=>{var s;const n=null==(s=e.params)?void 0:s.loginname;if(!n)return I("缺少用户名参数"),void t.replace("/");const r=await N(n);a.value=r};return b((()=>e.params),(()=>{var t;(null==(t=e.params)?void 0:t.loginname)&&(c(),i())})),{activeName:r,user:a,collects:n}}});const F=v("data-v-2f5db6c2");r("data-v-2f5db6c2");const H={class:"d-flex flex-column align-items-center userinfo"},J={class:"userinfo-avatar"},P={class:"userinfo-name"},Q={class:"d-flex align-items-center justify-content-around w-100"},Z={key:1,class:"userinfo-score"};i();const A=F(((e,t,a,s,n,r)=>{const i=x("nav-header"),u=x("van-empty"),v=x("recent-item"),f=x("van-tab"),g=x("van-tabs"),y=c("lazy");return l(),o(k,null,[d(i,{title:"用户信息"}),d("section",H,[m(d("img",J,null,512),[[y,e.user.avatar_url]]),d("p",P,p(e.user.loginname),1),d("div",Q,[e.user.create_at?(l(),o("span",{key:0,textContent:p(e.getLastTimeStr(e.user.create_at,!1))},null,8,["textContent"])):h("",!0),e.user.score?(l(),o("span",Z,"积分: "+p(e.user.score),1)):h("",!0)])]),d(g,{active:e.activeName,"onUpdate:active":t[1]||(t[1]=t=>e.activeName=t),swipeable:"",sticky:""},{default:F((()=>[d(f,{title:"最近回复",name:"replies"},{default:F((()=>[e.user.recent_replies&&0===e.user.recent_replies.length?(l(),o(u,{key:0,description:"暂无数据"})):(l(!0),o(k,{key:1},j(e.user.recent_replies,(e=>(l(),o(v,{key:e.id,item:e},null,8,["item"])))),128))])),_:1}),d(f,{title:"最新发布",name:"topics"},{default:F((()=>[e.user.recent_topics&&0===e.user.recent_topics.length?(l(),o(u,{key:0,description:"暂无数据"})):(l(!0),o(k,{key:1},j(e.user.recent_topics,(e=>(l(),o(v,{key:e.id,item:e},null,8,["item"])))),128))])),_:1}),d(f,{title:"用户收藏",name:"collects"},{default:F((()=>[e.collects&&0===e.collects.length?(l(),o(u,{key:0,description:"暂无数据"})):(l(!0),o(k,{key:1},j(e.collects,(e=>(l(),o(v,{key:e.id,item:e},null,8,["item"])))),128))])),_:1})])),_:1},8,["active"])],64)}));E.render=A,E.__scopeId="data-v-2f5db6c2";export default E;
