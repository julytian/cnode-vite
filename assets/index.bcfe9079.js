import{i as n,j as t,k as o,g as e,m as i,P as a,l,I as s,L as r,n as c,q as u,s as f,t as d,x as p,r as y,y as v}from"./index.20c60412.js";import{m,u as g}from"./mount-component.ccf178fb.js";var h=0;var C=l("toast"),b=C[0],k=C[1],O=b({props:{icon:String,show:Boolean,message:[Number,String],duration:Number,className:null,iconPrefix:String,lockScroll:Boolean,loadingType:String,forbidClick:Boolean,overlayClass:null,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,type:{type:String,default:"text"},position:{type:String,default:"middle"},transition:{type:String,default:"van-fade"}},emits:["update:show"],setup:function(l,f){var d,p=f.emit,y=!1,v=function(){var n=l.show&&l.forbidClick;y!==n&&((y=n)?(h||document.body.classList.add("van-toast--unclickable"),h++):h&&(--h||document.body.classList.remove("van-toast--unclickable")))},m=function(){l.closeOnClick&&p("update:show",!1)},g=function(){clearTimeout(d)},C=function(n){p("update:show",n)},b=function(){var n,t=l.type,o=l.message;if(c(o)&&""!==o)return"html"===t?e("div",{class:k("text"),innerHTML:o},null):e("div",{class:k("text")},"function"==typeof(n=o)||"[object Object]"===Object.prototype.toString.call(n)&&!u(n)?o:{default:function(){return[o]}})};return n([function(){return l.show},function(){return l.forbidClick}],v),n([function(){return l.show},function(){return l.duration}],(function(){g(),l.show&&l.duration>0&&(d=setTimeout((function(){p("update:show",!1)}),l.duration))})),t(v),o(v),function(){var n;return e(a,i({show:l.show,class:[k([l.position,(n={},n[l.type]=!l.icon,n)]),l.className],lockScroll:!1,transition:l.transition,overlayClass:l.overlayClass,overlayStyle:l.overlayStyle,closeOnClickOverlay:l.closeOnClickOverlay,onClick:m,onClosed:g},{"onUpdate:show":C}),{default:function(){return[(n=l.icon,t=l.type,o=l.iconPrefix,i=l.loadingType,n||"success"===t||"fail"===t?e(s,{name:n||t,class:k("icon"),classPrefix:o},null):"loading"===t?e(r,{class:k("loading"),type:i},null):void 0),b()];var n,t,o,i}})}}}),w={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:null,onOpened:null,duration:2e3,teleport:"body",iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:null,closeOnClick:!1,closeOnClickOverlay:!1},S={},x=[],j=!1,T=f({},w);function P(n){return d(n)?n:{message:n}}function B(){if(!p)return{};if(!x.length||j){var t=function(){var t=m({setup:function(){var t=y(),a=g(),l=a.open,s=a.state,r=a.close,c=a.toggle,u=function(){j&&(x=x.filter((function(n){return n!==o})),i())};return n(t,(function(n){s.message=n})),v().render=function(){return e(O,f({},s,{onClosed:u,"onUpdate:show":c}),null)},{open:l,clear:r,message:t}}}),o=t.instance,i=t.unmount;return o}();x.push(t)}return x[x.length-1]}function N(n){void 0===n&&(n={});var t=B();return n=P(n),n=f({},T,S[n.type||T.type],n),t.open(n),t}["loading","success","fail"].forEach((function(n){var t;N[n]=(t=n,function(n){return N(f({type:t},P(n)))})})),N.clear=function(n){x.length&&(n?(x.forEach((function(n){n.clear()})),x=[]):j?x.shift().clear():x[0].clear())},N.setDefaultOptions=function(n,t){"string"==typeof n?S[n]=t:f(T,n)},N.resetDefaultOptions=function(n){"string"==typeof n?S[n]=null:(T=f({},w),S={})},N.allowMultiple=function(n){void 0===n&&(n=!0),j=n},N.install=function(n){n.use(O),n.config.globalProperties.$toast=N};export{N as T};
