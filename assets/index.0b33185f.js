import{d as e,O as t,b as a,a as s,W as n,p as r,c as i,J as c,o,f as l,w as m,g as u,ap as p,R as d,h as v,_ as f,u as g,r as _,j as y,i as x,e as b,Q as h,F as j,a8 as k}from"./index.40eb45fc.js";import{T as w,a as T,E as C}from"./index.b70bf7bc.js";import{T as I}from"./index.f54d46e2.js";import{b as L}from"./user.0ab94002.js";import"./index.e756eb57.js";import"./useChildren.0cc2a4ba.js";import"./use-route.cf362ce8.js";import"./mount-component.617105fe.js";var N=e({name:"RecentItem",props:{item:{type:Object,default:{},required:!0}},methods:{getLastTimeStr:(e,a)=>t(e,a)},setup(){const e=a(),t=s();return{goDetail:a=>{t.push(`/topic/${a.id}`),e.dispatch(`topic/${n}`,a.id)},goUser:e=>{t.push(`/user/${e.author.loginname}`)}}}});const S=v("data-v-22cd743c");r("data-v-22cd743c");const U={class:"d-flex flex-column justify-content-between flex-1 recent-wrap"},R={class:"text-ellipsis recent-title"},$={class:"d-flex align-items-center justify-content-between"},z={class:"recent-loginname"},D={class:"recent-time"};i();const O=S(((e,t,a,s,n,r)=>{const i=c("lazy");return o(),l("section",{class:"d-flex recent",onClick:t[2]||(t[2]=t=>e.goDetail(e.item))},[m(u("img",{class:"recent-avatar",onClick:t[1]||(t[1]=p((t=>e.goUser(e.item)),["stop"]))},null,512),[[i,e.item.author.avatar_url]]),u("div",U,[u("div",R,d(e.item.title),1),u("div",$,[u("span",z,d(e.item.author.loginname),1),u("span",D,d(e.getLastTimeStr(e.item.last_reply_at,!0)),1)])])])}));N.render=O,N.__scopeId="data-v-22cd743c";var q=e({name:"UserPage",components:{[w.name]:w,[T.name]:T,[C.name]:C,NavHeader:f,RecentItem:N},methods:{getLastTimeStr:(e,a)=>t(e,a)},setup(){const e=g(),t=s(),a=_({}),n=_("replies");y((()=>{r()}));const r=async()=>{var s;const n=null==(s=e.params)?void 0:s.loginname;if(!n)return I("缺少用户名参数"),void t.replace("/");const r=await L(n);a.value=r};return x((()=>e.params),(()=>{var t;(null==(t=e.params)?void 0:t.loginname)&&r()})),{activeName:n,user:a}}});const E=v("data-v-465e22a1");r("data-v-465e22a1");const F={class:"d-flex flex-column align-items-center userinfo"},H={class:"userinfo-avatar"},J={class:"userinfo-name"},P={class:"d-flex align-items-center justify-content-around w-100"},Q={key:1,class:"userinfo-score"};i();const W=E(((e,t,a,s,n,r)=>{const i=b("nav-header"),p=b("van-empty"),v=b("recent-item"),f=b("van-tab"),g=b("van-tabs"),_=c("lazy");return o(),l(j,null,[u(i,{title:"用户信息"}),u("section",F,[m(u("img",H,null,512),[[_,e.user.avatar_url]]),u("p",J,d(e.user.loginname),1),u("div",P,[e.user.create_at?(o(),l("span",{key:0,textContent:d(e.getLastTimeStr(e.user.create_at,!1))},null,8,["textContent"])):h("",!0),e.user.score?(o(),l("span",Q,"积分: "+d(e.user.score),1)):h("",!0)])]),u(g,{active:e.activeName,"onUpdate:active":t[1]||(t[1]=t=>e.activeName=t),swipeable:"",sticky:""},{default:E((()=>[u(f,{title:"最近回复",name:"replies"},{default:E((()=>[e.user.recent_replies&&0===e.user.recent_replies.length?(o(),l(p,{key:0,description:"暂无数据"})):(o(!0),l(j,{key:1},k(e.user.recent_replies,(e=>(o(),l(v,{key:e.id,item:e},null,8,["item"])))),128))])),_:1}),u(f,{title:"最新发布",name:"topics"},{default:E((()=>[e.user.recent_topics&&0===e.user.recent_topics.length?(o(),l(p,{key:0,description:"暂无数据"})):(o(!0),l(j,{key:1},k(e.user.recent_topics,(e=>(o(),l(v,{key:e.id,item:e},null,8,["item"])))),128))])),_:1})])),_:1},8,["active"])],64)}));q.render=W,q.__scopeId="data-v-465e22a1";export default q;
