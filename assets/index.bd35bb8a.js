import{d as e,_ as a,r as s,u as t,a as n,b as o,S as r,p as c,c as i,e as d,o as l,f as u,g as m,w as p,v,F as b,h as f}from"./index.20c60412.js";import{T as g}from"./index.bcfe9079.js";import{a as h}from"./user.deb0831c.js";import"./mount-component.ccf178fb.js";var k=e({name:"LoginPage",components:{NavHeader:a},setup(){const e=s(""),a=t(),c=n(),i=o(),d=a.query.redirect;return{token:e,submit:async()=>{if(e.value)try{const a=await h(e.value),s={loginname:a.loginname,avatar_url:a.avatar_url,userId:a.id,token:e.value};window.sessionStorage.user=JSON.stringify(s),i.dispatch(`user/${r}`,s);const t=decodeURIComponent(d||"/");c.replace({path:t})}catch(a){}else g("令牌格式错误,应为36位UUID字符串")}}}});const w=f("data-v-6cdb0e3e");c("data-v-6cdb0e3e");const x={class:"login-info"};i();const y=w(((e,a,s,t,n,o)=>{const r=d("nav-header");return l(),u(b,null,[m(r,{"show-menu":!1,title:"登录"}),m("section",x,[p(m("input",{"onUpdate:modelValue":a[1]||(a[1]=a=>e.token=a),class:"login-input",type:"text",placeholder:"Access Token",maxlength:"36"},null,512),[[v,e.token,void 0,{trim:!0}]]),m("div",{class:"login-btn",onClick:a[2]||(a[2]=(...a)=>e.submit&&e.submit(...a))},"登录")])],64)}));k.render=y,k.__scopeId="data-v-6cdb0e3e";export default k;
