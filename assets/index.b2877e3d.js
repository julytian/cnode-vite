import{D as e,d as a,G as s,p as t,c as n,e as m,H as i,o as r,f as d,g as o,w as c,K as l,J as g,h as p,_,r as u,b as v,q as y,F as f,U as h}from"./index.f2a5cdb3.js";import{T as k,a as b,E as x}from"./index.fa69fe26.js";import"./use-route.93a4a725.js";var T=a({name:"MessageItem",props:{item:{type:Object,default:{},required:!0}},methods:{getLastTimeStr:(e,a)=>s(e,a)}});const I=p("data-v-69124f45");t("data-v-69124f45");const M={class:"message markdown-body"},j={class:"d-flex"},w={class:"message-hd-avatar"},H={class:"flex-1 message-hd-title"},L={key:0},N={key:1},q={class:"message-topic"};n();const C=I(((e,a,s,t,n,p)=>{const _=m("router-link"),u=i("lazy");return r(),d("section",M,[o("div",j,[c(o("img",w,null,512),[[u,e.item.author.avatar_url]]),o("p",H,[o("span",null,l(e.item.author.loginname),1),"at"===e.item.type?(r(),d("span",L,"在回复中@了您")):g("",!0),"reply"===e.item.type?(r(),d("span",N,"回复了您的话题")):g("",!0)]),o("span",{class:"message-hd-time",textContent:l(e.getLastTimeStr(e.item.reply.create_at,!0))},null,8,["textContent"])]),o("div",{class:"message-reply",innerHTML:e.item.reply.content},null,8,["innerHTML"]),o(_,{to:{name:"Topic",params:{id:e.item.topic.id}}},{default:I((()=>[o("div",q,"话题："+l(e.item.topic.title),1)])),_:1},8,["to"])])}));T.render=C,T.__scopeId="data-v-69124f45";var S=a({name:"MessagePage",components:{[k.name]:k,[b.name]:b,[x.name]:x,NavHeader:_,MessageItem:T},setup(){const a=u({}),s=u("has_read_messages"),t=v(),{token:n}=t.state.user.userInfo;return y((async()=>{try{const t=await(s=n,e.get(`/messages?accesstoken=${s}`));a.value=t}catch(t){}var s})),{message:a,activeName:s}}});const U=p("data-v-c9afc390"),z=U(((e,a,s,t,n,i)=>{const c=m("nav-header"),l=m("van-empty"),g=m("message-item"),p=m("van-tab"),_=m("van-tabs");return r(),d(f,null,[o(c,{title:"消息"}),o(_,{active:e.activeName,"onUpdate:active":a[1]||(a[1]=a=>e.activeName=a),swipeable:"",sticky:""},{default:U((()=>[o(p,{title:"已读消息",name:"has_read_messages"},{default:U((()=>[e.message.has_read_messages&&0===e.message.has_read_messages.length?(r(),d(l,{key:0,description:"暂无数据"})):(r(!0),d(f,{key:1},h(e.message.has_read_messages,(e=>(r(),d(g,{key:e.id,item:e},null,8,["item"])))),128))])),_:1}),o(p,{title:"未读消息",name:"hasnot_read_messages"},{default:U((()=>[e.message.hasnot_read_messages&&0===e.message.hasnot_read_messages.length?(r(),d(l,{key:0,description:"暂无数据"})):(r(!0),d(f,{key:1},h(e.message.hasnot_read_messages,(e=>(r(),d(g,{key:e.id,item:e},null,8,["item"])))),128))])),_:1})])),_:1},8,["active"])],64)}));S.render=z,S.__scopeId="data-v-c9afc390";export default S;
