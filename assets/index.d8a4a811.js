import{d as a,_ as e,r as s,u as t,a as n,b as o,S as r,p as c,c as i,e as d,o as l,f as u,g as m,w as p,v,F as g,h as b}from"./index.f2a5cdb3.js";import{T as f}from"./index.2fc99c3c.js";import{a as h}from"./user.33ba3879.js";var k=a({name:"LoginPage",components:{NavHeader:e},setup(){const a=s(""),e=t(),c=n(),i=o(),d=e.query.redirect;return{token:a,submit:async()=>{if(a.value)try{const e=await h(a.value),s={loginname:e.loginname,avatar_url:e.avatar_url,userId:e.id,token:a.value};window.sessionStorage.user=JSON.stringify(s),i.dispatch(`user/${r}`,s);const t=decodeURIComponent(d||"/");c.replace({path:t})}catch(e){}else f("令牌格式错误,应为36位UUID字符串")}}}});const w=b("data-v-6cdb0e3e");c("data-v-6cdb0e3e");const x={class:"login-info"};i();const y=w(((a,e,s,t,n,o)=>{const r=d("nav-header");return l(),u(g,null,[m(r,{"show-menu":!1,title:"登录"}),m("section",x,[p(m("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>a.token=e),class:"login-input",type:"text",placeholder:"Access Token",maxlength:"36"},null,512),[[v,a.token,void 0,{trim:!0}]]),m("div",{class:"login-btn",onClick:e[2]||(e[2]=(...e)=>a.submit&&a.submit(...e))},"登录")])],64)}));k.render=y,k.__scopeId="data-v-6cdb0e3e";export default k;
