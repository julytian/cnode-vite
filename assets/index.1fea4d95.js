import{d as e,_ as a,r as s,u as t,a as n,b as o,S as r,p as c,c as i,e as l,o as d,f as u,g as m,w as p,v,F as f,h as g}from"./index.4ac44177.js";import{T as b}from"./index.e6c9ea8f.js";import{a as h}from"./user.38563c22.js";import"./mount-component.f0f73cf6.js";var k=e({name:"LoginPage",components:{NavHeader:a},setup(){const e=s(""),a=t(),c=n(),i=o(),l=a.query.redirect;return{token:e,submit:async()=>{if(e.value)try{const a=await h(e.value),s={loginname:a.loginname,avatar_url:a.avatar_url,userId:a.id,token:e.value};window.sessionStorage.user=JSON.stringify(s),i.dispatch(`user/${r}`,s);const t=decodeURIComponent(l||"/");c.replace({path:t})}catch(a){}else b("令牌格式错误,应为36位UUID字符串")}}}});const w=g("data-v-6cdb0e3e");c("data-v-6cdb0e3e");const x={class:"login-info"};i();const y=w(((e,a,s,t,n,o)=>{const r=l("nav-header");return d(),u(f,null,[m(r,{"show-menu":!1,title:"登录"}),m("section",x,[p(m("input",{"onUpdate:modelValue":a[1]||(a[1]=a=>e.token=a),class:"login-input",type:"text",placeholder:"Access Token",maxlength:"36"},null,512),[[v,e.token,void 0,{trim:!0}]]),m("div",{class:"login-btn",onClick:a[2]||(a[2]=(...a)=>e.submit&&e.submit(...a))},"登录")])],64)}));k.render=y,k.__scopeId="data-v-6cdb0e3e";export default k;
